<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>reveal.js - The HTML Presentation Framework</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Zachary Welch">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/kabu.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <style>
      .danger { color: #ee6565; }
      .success { color: #56b881; }
      .warning { color: #f1f075; }
      .strikethrough { text-decoration: line-through; }
      .block { display: block; }
      .large { font-size: 200% !important; }
      .reveal pre { background: #3f3f3f; }
      mark.fragment { background: transparent; color: inherit; }
    </style>
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h1>sqlserver-sequence</h1>
          <h3>An Open-Source Journey</h3>
          <p>
            <small>by <a href="mailto:zachary.welch@careerbuilder.com">zachary welch</a> / <a href="http://cb-kabu.herokuapp.com/team.html">wannabe hokage</a></small>
          </p>
          <aside class='notes'>
            Thank you for coming. In this talk I’ll be sharing our journey creating and releasing sqlserver-sequence, some unexpected pitfalls, and different ways of giving back to the community.
          </aside>
        </section>

        <section>
          <img src='img/rubygems.png'>
          <aside class='notes'>
            So sqlserver-sequence was published in July. It was our first open-source project on RubyGems.org. Since then it’s enjoyed around a thousand downloads.
          </aside>
        </section>

        <section>
          <h4>Basic Usage</h4>
<pre>
<code data-trim data-noescape>
class Checkout < ActiveRecord::Base
  sequence :order_id
end
</code>
<code data-trim data-noescape class='fragment'>
$ checkout = Checkout.create
$ checkout.order_id
> 1
</code>
<code data-trim data-noescape class='fragment'>
$ other_checkout = Checkout.create
$ other_checkout.order_id
> 2  
</code>
</pre>
          <aside class='notes'>
            <p>
              The gem is pretty straightforward and easy to use. Let's assume we have a checkout model with a sequence defined on its order_id column. 
            </p>
            <p>
              When the checkout is created order_id should receive the next value for that sequence defined in SQL Server. 
            </p>
            <p>
              And if I create another checkout it receives the next sequence value and so on.
            </p>
          </aside>

        </section>

        <section>
          <h4>Options</h4>
<pre>
<code data-trim data-noescape>
class Checkout < ActiveRecord::Base
  sequence :order_id<mark class='fragment'>, name: 'contract_id'</mark><mark class='fragment'>,
                      prefix: 'CT-'</mark><mark class='fragment'>,
                      format: lambda { |n| n.rjust(8, 0) }</mark>
end
</code>
<code data-trim data-noescape class='fragment'>
$ checkout = Checkout.create
$ checkout.order_id
> "CT-00000001" # generated by sequence named 'contract_id'
</code>
<code data-trim data-noescape class='fragment'>
$ other_checkout = Checkout.create
$ other_checkout.order_id
> "CT-00000002"
</code>
</pre>

          <aside class='notes'>
            <p>
              There are also options to map to a sequence named differently than your attribute. 
            </p>
            <p>
              You can assign a prefix to the beginning of the sequence.
            </p>
            <p>
              And if you need more control of the sequence format you can pass in lambda expression.
            </p>
            <p>
              What you end up with in this example is a sequence value that matches something like contract numbers.
            </p>
            <p>
              And if I create another checkout it receives the next available contract number.
            </p>
          </aside>
        </section>

        <section data-background='img/map.jpg'>
          <aside class='notes'>
            So that's sqlserver-sequence in a nutshell. Let's begin the journey of seeing what went into building this gem.
          </aside>
        </section>

        <section data-background="#3887be" data-background-transition="zoom">
          <h2>Research</h2>
          <aside class='notes'>
            Well the first thing we had to do was research existing solutions. One of the wonderful benefits of an open-source community is people sharing solutions to common problems. We certainly don't want to reinvent the wheel.
          </aside>
        </section>

        <section>
<!--           <section>
            <img src='img/sequence-name2.png'>
          </section>
 -->
          <section>
            <img src='img/rubytoolbox.png'>
            <aside class='notes'>
              Ruby Toolbox is great resource for finding gems. You can filter by different categories and see them ranked by popularity.
            </aside>
          </section>

          <section>
            <img src='img/sequenced.png'>
            <img src='img/mongoid-sequence.png'> 
            <img src='img/oracle-enhanced.png'>
            <aside class='notes'>
              There were several interesting gems that provided sequence generation in Rails. There was even sequence support within ActiveRecord itself, but none of the gems really fit our use case and patching them was impractical.
            </aside>
          </section>

          <section>
            <img src='img/learn.jpg'>
            <aside class='notes'>
              However I did notice some patterns in terms of interface design and these ideas would later influence our own interface. Plus it's just cool being able to see how these popular gems work under the hood and you learn a lot of great techniques for improving your own code.
            </aside>
          </section>
        </section>

        <section data-background="#3887be" data-background-transition="zoom">
          <h2>Designing For Open-source</h2>
          <aside class='notes'>
            So we move on to designing our own gem.
          </aside>
        </section>

        <section data-background="#418B61">
          <h2>Naming</h2>
          <aside class='notes'>
            The first question we began asking was, what should we name this gem?
          </aside>
        </section>

        <section>          
          <section>
            <h3>What's in a name?</h3>
            <ul>
              <li class='fragment'>
                sequence
              </li>
              <li class='fragment'>
                sequencer
              </li>
              <li class='fragment'>
                sequenced
              </li>
              <li class='fragment'>
                acts_as_sequence
              </li>
            </ul>
            <aside class='notes'>
              For example, these were some of the names Ram and I tossed around in the beginning.
            </aside>
          </section>

          <section data-background="http://i.giphy.com/tpwwhv1BLd31e.gif">
          </section>

          <section>
            <h3>Rubygems</h3>
            <img src='img/mongoid-sequencer.png'>
            <aside class='notes'>
              So I was struggling trying to find a unique name, and instead did a quick search on Rubygems for 'Sequence'. I remembered the mongoid-sequence gem from earlier, liked its format, and said ok, how about sqlserver-sequence?
            </aside>
          </section>

          <section>
            <h3>Naming Guidelines</h3>
            <img src='img/guides.png'>
            <aside class='notes'>
              But wait, should it be a hyphen, underscore, or PascalCase? Thankfully Rubygems provides naming guidelines for the community so there's no confusion when to use a hyphen, when to use an underscore, etc.
            </aside>
          </section>

          <section data-background="http://i.giphy.com/26FxCOdhlvEQXbeH6.gif">
            <h2>sqlserver-sequence</h2>
            <aside class='notes'>
              So yes, I settled on sqlserver-sequence.
            </aside>
          </section>
        </section>

        <section data-background="#418B61">
          <h2>Getting Started</h2>
          <aside class='notes'>
            After deciding on a name, you're gonna want to get started on the right foot.
          </aside>
        </section>

        <section>
<!--           <section data-markdown>
            <script type="text/template">
              #### rails plugin

              ```
              > rails plugin new sqlserver-sequence
              ```
            </script>
          </section>
          <section data-markdown>
            <script type="text/template">
              #### Jeweler Gem

              ```
              > jeweler sqlserver-sequence
              ```
            </script>
          </section>
 -->          
          <section>
            <h4>Bundler</h4>
<pre>
<code data-trim data-noescape>
> bundle gem sqlserver-sequence
</code> 
<code data-trim data-noescape class='fragment'>
      create  sqlserver-sequence/Gemfile
      create  sqlserver-sequence/<mark>Rakefile</mark>
      create  sqlserver-sequence/<mark>LICENSE.txt</mark>
      create  sqlserver-sequence/<mark>README.md</mark>
      create  sqlserver-sequence/.gitignore
      create  sqlserver-sequence/sqlserver-sequence.gemspec
      create  sqlserver-sequence/lib/sqlserver/sequence.rb
      create  sqlserver-sequence/lib/sqlserver/sequence/<mark>version.rb</mark>
<mark>Initializing git repo</mark> in /Users/zwelch/sqlserver-sequence
</code>
</pre>
            <aside class='notes'>
              <p>There are many options for creating gems in Ruby.</p>
              <p>There's rails plugin new, a gem called jeweler which I used in the past for other projects like ActiveService</p>
              <p>One option that's becoming very popluar is Bundler. Most of you probably know bundler as the dependency manager for Ruby, but it can also be used to create gems.</p>
              <p>Once you run the bundle gem command it spits out a bunch of useful files for open-source development. We'll come back to this later.</p>
            </aside>
          </section>         
        </section>

        <section data-background="#418B61">
          <h2>Design Your Interface</h2>
          <aside class='notes'>
            Next we begin looking at the interfce. We've had tremendous success with API-first design. That is, prototyping what the interface may look to developers and iterating on endpoints and resource definitions before writing code. I wanted to take a similar approach with this gem.
          </aside>
        </section>

        <section>
          <section>
            <strong>Basic usage</strong>

<pre>
<code data-trim data-noescape>
class Checkout < ActiveRecord::Base
  self.sequence_field = 'order_id'
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  acts_as_sequence :order_id
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  sequence_number :order_id
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  sequenced :order_id
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  sequence :order_id
end
</code>
</pre>
            <aside class='notes'>
              <p>
                So I started off by typing into an editor the interface Ram and I worked on previously
              </p>
              <p>
                Then began slowly tweaking it for the basic use case until it was clear and concise.
              </p>
            </aside>
          </section>

          <section>
            <strong>Options</strong>            
<pre>
<code data-trim data-noescape>
class Checkout < ActiveRecord::Base
  sequence :order_id, <mark>sequence_name</mark>: 'OrderNumber', 
                      <mark>sequence_prefix</mark>: 'CT-'
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  sequence :order_id, <mark>name</mark>: 'OrderNumber', <mark>prefix</mark>: 'CT-'
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  sequence :order_id, name: 'OrderNumber', prefix: 'CT-',
                      <mark>format: lambda { |n| n.rjust(8, 0) }</mark>
end
</code>
<code data-trim data-noescape class='fragment'>
class Checkout < ActiveRecord::Base
  sequence :order_id, name: 'OrderNumber', prefix: 'CT-',
                      format: lambda { |n| n.rjust(8, 0) }

  <mark>sequence :purchase_order</mark>
end
</code>
</pre>
            <aside class='notes'>
              <p>Next came options such as sequence name and prefix</p>
              <p>All these adjustments are quick and painless. Remember I'm just focused on the gem's public interface.</p>
            </aside>
          </section>

          <section data-background="http://i.giphy.com/7vhAnGwSOQvUQ.gif">
            <aside class="notes">
              Ok you're probably thinking, "Is that really necessary?"
            </aside>
          </section>

          <section>
            <h3>Why dedicate time up-front?</h3>
            <ul>
              <li class='fragment'>
                quickly go through different <span class='success'>use cases</span>
              </li>
              <li class='fragment'>
                giving <span class='success'>expression</span> to your gem
              </li>
              <li class='fragment'>
                developer <span class='success'>experience</span>
              </li>
              <li class='fragment'>
                apis are <span class='danger'>expensive</span> to change
              </li>
              <li class='fragment'>
                <span class='success'>0</span> lines of code
              </li>
            </ul> 
            <aside class='notes'>
              designing for the ideal
            </aside>
          </section>

        </section>
        
        <section data-background="#418B61">
          <h2>The Code</h2>
          <aside class='notes'>
            Finally we can move on to the code
          </aside>
        </section>
        
        <section>          

          <section data-background='img/tdd.png'>
            <div style="background-color: rgba(0, 0, 0, 0.7); color: #fff; padding: 20px;">
              <h3>TDD now</h3>
              <h4>You'll Thank Yourself Later :)</h4>
            </div>
            <aside class='note'>
               May seem cute but try finding a successful open-source project in Ruby without tests. Quality can make or break a gem so it's important the code be well-tested.
            </aside>
          </section>

<!--           <section data-transition='fade'>
            <img src='img/loc.png'>        
          </section>
 -->
          <section data-transition='fade'>
            <h4>Names are worth their weight in <span class='warning'>$</span>gold<span class='warning'>$</span></h4>
            <img src='img/variables.png'>        
            <aside class='notes'>
               Also it's worth putting even greater emphasis on variable and method names. You want others to contribute and that's much easier when the code is easy to understand. It also encourages those who contribute to exhibit the same care for quality.
            </aside>
          </section>
        </section>

        <section data-background="#418B61">
          <h2>Convention Over Configuration</h2>
        </section>

        <section>
          <section data-transition='fade'>
            <img src='img/convention-1.png'>
          </section>
          <section data-transition='fade'>
            <img src='img/convention-2.png'>
          </section>
          <section data-transition='fade'>
            <img src='img/convention-3.png'>
          </section>
          <section data-transition='fade'>
            <img src='img/convention-4.png'>
          </section>
        </section>
        
        <section data-background="#418B61">
          <h2>Documentation</h2>
          <aside class='note'>
             A key differentiator for open-source projects is documentation. Documentation can make or break developer adoption. If two projects provide the same level of functionality and one has great documentation, the other doesn't. Guess which one developers are more likely to choose?
          </aside>
        </section>

        <section>
          <section>
<pre>
<code data-trim data-noescape>
> bundle gem sqlserver-sequence
      create  sqlserver-sequence/Gemfile
      create  sqlserver-sequence/Rakefile
      create  sqlserver-sequence/LICENSE.txt
      <mark>create  sqlserver-sequence/README.md</mark>
      create  sqlserver-sequence/.gitignore
      create  sqlserver-sequence/sqlserver-sequence.gemspec
      create  sqlserver-sequence/lib/sqlserver/sequence.rb
      create  sqlserver-sequence/lib/sqlserver/sequence/version.rb
Initializing git repo in /Users/zwelch/sqlserver-sequence
</code>
</pre>
            <aside class='notes'>
              Documentation is so important to open-source development that bundler automatically generates a README document for your project, much like Github.
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/installation.png'>
            <aside class='notes'>
               In fact it goes a step further by adding installation steps for those wanting to get started using the gem
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/usage.png'>
            <aside class='notes'>
              Perhaps the greatest value you can provide in your documentation are examples of how to use gem. Sadly people could care less about what's going on inside your beautiful code base. What they really want to know is how can I use your gem and does it solve my problem, yes or no? Think about your own experience evaluating gems and keep this in mind while crafting documentation.
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/options.png'>
            <aside class='notes'>
              For example what happens when I break from conventions. What are some of the other options I can use and what are the side effects?
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/contributing.png'>
            <aside class='notes'>
              Finally always include a section on Contributing. Everyone has their own policy for contributing and developers will want to know how you accept contributions. Bundler automatically includes a contributing section based on standard git flow, which is what the majority of the open-source community follows.
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/badges.png'>
            <aside class='notes'>
              Another great way to drive adoption is to include badges in your repository. These add another layer of polish and professionalism and could sway developers towards your gem.
            </aside>
          </section>
        </section>

        <section data-background="#3887be" data-background-transition="zoom">
          <h2>Pitfalls</h2>
          <aside class='notes'>
            So let's take a look at some of the pitfalls along the way
          </aside>
        </section>

        <section data-background="#418B61">
          <h2>Testing</h2>
          <aside class='notes'>
            Believe it or not testing was the hardest challenge
          </aside>
        </section>

        <section>
          <section>
            <img src='img/sqlserver.png'> 
            <aside class='notes'>
              There were a few tests that depended on SQL Server. However today SQL Server's only available on Windows. To mitigate that I funneled code that relied on proprietary T-SQL into a separate method which could then be stubbed elsewhere in the tests. Still there's one test that depends on SQL Server which presents a challenge if you're looking for outside contributions.
            </aside>
          </section>
          
          <section data-transition='fade'>
            <img src='img/travisci.png'>
            <aside class='notes'>
              In a similar vein I needed something for continuous integration but many of the free hosted services don't support Windows.
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/teamcity.png'>
            <aside class='notes'>
              I looked at free services for Team City but the restrictions were bizarre and prohibitive.
            </aside>
          </section>

          <section data-transition='fade'>
            <img src='img/appveyor.png'>
            <aside class='notes'>
              One provider that did look promising was Appveyor, which is what sqlserver-adapter happens to be using. I've also seen it written on some whiteboards downstairs so perhaps site is using it? This is one area where I would definitely appreciate some help if you're interested.
            </aside>
          </section>
        </section>

        <section data-background="#418B61">
          <h2>Releasing</h2>
        </section>

        <section>
          <section>
<pre>
<code data-trim data-noescape>
> bundle gem sqlserver-sequence
      create  sqlserver-sequence/Gemfile
      create  sqlserver-sequence/Rakefile
      create  sqlserver-sequence/LICENSE.txt
      create  sqlserver-sequence/README.md
      create  sqlserver-sequence/.gitignore
      create  sqlserver-sequence/sqlserver-sequence.gemspec
      create  sqlserver-sequence/lib/sqlserver/sequence.rb
      <mark>create  sqlserver-sequence/lib/sqlserver/sequence/version.rb</mark>
Initializing git repo in /Users/zwelch/sqlserver-sequence
</code>
</pre>          
          </section>
          <section data-markdown data-transition='none'>
            <script type="text/template">
              ```ruby
              module Sqlserver::Sequence
                VERSION = "0.0.1"
              end
              ```
            </script>
          </section>

          <section data-markdown data-transition='fade'>
            <script type="text/template">
              ```ruby
              module Sqlserver::Sequence
                VERSION = "0.1.0"
              end
              ```
            </script>
          </section>

          <section data-transition='none'>
            <img src='img/yanked.png'>
          </section>
          <section data-transition='none'>
            <img src='img/yanked-2.png'>
          </section>
          <section data-transition='none'>
            <img src='img/yanked-3.png'>
          </section>
          <section data-background='http://i.giphy.com/nqSxeI6cVrBba.gif'>
          </section>

          <section data-markdown>
            <script type="text/template">
              ```ruby
              module Sqlserver::Sequence
                VERSION = "0.0.1"
              end
              ```
            </script>
          </section>          
          <section data-markdown data-transition='none'>
            <script type="text/template">
              ```ruby
              module Sqlserver::Sequence
                VERSION = "0.0.1.pre"
              end
              ```
            </script>
          </section>          
        </section>

        <section data-background="#3887be" data-background-transition="zoom">
          <h2>Giving Back</h2>
        </section>

        <section>
          <section data-transition='fade'>
            <h3>Reporting issues is a huge help</h3>
            <img src='img/issues.png'>
          </section>

          <section data-transition='fade'>
            <h3>Documentation including examples</h3>
            <img src='img/documentation.png'>
          </section>

          <section data-transition='fade'>
            <h3>Contribute to a gem you use a lot</h3>
            <img src='img/contribute.png'>
          </section>

          <section data-transition='fade'>
            <h3>Open a PR for a fix you added</h3>
            <img src='img/pr.png'>
          </section>

          <section data-transition='fade'>
            <h3>GitFlow Helps!</h3>
            <img src='img/gitflow.png'>
          </section>

          <section>
            <h3>Community makes open source work</h3>
            <img src='img/stars.png'>
          </section>

          <section data-transition='fade'>
            <h3>Why are stars important?</h3>
            <ul>
              <li class='fragment'>Shows <span class='success'>appreciation</span></li>
              <li class='fragment'>Encourages more <span class='success'>activity</span></li>
              <li class='fragment'>Let's others know you were <span class='success'>successful</span></li>
              <li class='fragment'><span class='success'>Elevates</span> project status</li>
              <li class='fragment'>Furthers <span class='success'>adoption</span></li>
              <li class='fragment'>Increases <span class='success'>contributions</span></li>
            </ul>
          </section>

          <section>
            <h3>Doesn’t require significant time or genius intellect</h3>
          </section>


          <section>
            <blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
            &ldquo;Designing a new language or web framework may take inspiration, but the rest of what makes projects like Rails successful is perspiration.&rdquo;
            </blockquote>
          </section>

          <section>
            <h3>Sharing is caring</h3>
          </section>
        </section>

        <section data-background-transition="zoom">
          <h2>Thanks <span class='success'>:)</span></h2>
        </section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
